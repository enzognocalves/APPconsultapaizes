<ion-header>
  <ion-toolbar>
    <ion-title>Consultar País</ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home" text="Voltar"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="container">
    
    <!-- Card de Consulta -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>Consulta de País</ion-card-title>
        <ion-card-subtitle>Digite o nome do país para consultar informações</ion-card-subtitle>
      </ion-card-header>

      <ion-card-content>
        <ion-item>
          <ion-label position="stacked">Nome do País</ion-label>
          <ion-input 
            [(ngModel)]="nomePais" 
            (keyup.enter)="consultar()"
            [disabled]="isConsultando">
          </ion-input>
        </ion-item>

        <div class="button-group">
          <ion-button 
            expand="block" 
            (click)="consultar()" 
            [disabled]="isConsultando || !nomePais.trim()"
            class="consultar-button">
            <ion-spinner *ngIf="isConsultando" name="crescent" slot="start"></ion-spinner>
            <ion-icon name="search" slot="start" *ngIf="!isConsultando"></ion-icon>
            {{ isConsultando ? 'Consultando...' : 'Consultar' }}
          </ion-button>

          <ion-button 
            expand="block" 
            fill="outline" 
            (click)="limparConsulta()"
            [disabled]="isConsultando"
            class="limpar-button">
            <ion-icon name="close-circle" slot="start"></ion-icon>
            Limpar
          </ion-button>
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Card de Resultados -->
    <ion-card *ngIf="dadosPais" class="result-card">
      <ion-card-header>
        <ion-card-title>{{ dadosPais.name }}</ion-card-title>
        <ion-card-subtitle>Capital: {{ dadosPais.capital }}</ion-card-subtitle>
      </ion-card-header>
      
      <ion-card-content>
        <ion-grid>
          <ion-row>
            <ion-col size="12" size-md="6">
              <p><strong>Região:</strong> {{ dadosPais.region }}</p>
              <p><strong>População:</strong> {{ dadosPais.population | number }}</p>
              <p><strong>Moedas:</strong> {{ dadosPais.currencies.join(', ') || 'Não informado' }}</p>
              <p><strong>Idiomas:</strong> {{ dadosPais.languages.join(', ') || 'Não informado' }}</p>
            </ion-col>
            <ion-col size="12" size-md="6">
              <div class="flag-container">
                <img [src]="dadosPais.flag" [alt]="'Bandeira do ' + dadosPais.name" class="flag-image">
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-content>
    </ion-card>

    <!-- Card de Erro -->
    <ion-card *ngIf="error" class="error-message">
      <ion-card-content>
        <ion-icon name="warning" slot="start"></ion-icon>
        {{ error }}
      </ion-card-content>
    </ion-card>

  </div>
</ion-content>